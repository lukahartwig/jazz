import { CodeGroup } from "@/components/forMdx";
export const metadata = { title: "Providers" };

# Providers

After defining your [schemas](/docs/building-with-jazz/schemas), the next step is connecting your application to the Jazz network. This is where Providers come in.

## What are Providers?

Providers are components that connect your application to Jazz's collaborative infrastructure. They sit at the top of your application and make your schemas available throughout your component tree.

In Jazz, providers handle several critical functions:

- **Data Synchronization**: They manage connections to the Jazz network, ensuring data stays in sync across devices
- **Local Storage**: They persist data between sessions, so users don't lose their work
- **Schema Registration**: They make your schemas available to the rest of your application
- **Authentication**: They connect user accounts to your data, enabling multi-device access

## Provider Structure

Here's a simple example of a provider in a React application:

<CodeGroup>
```tsx twoslash
// @filename: schema.ts
import { co, z } from "jazz-tools";

export const MyAppAccount = co.account({
  root: co.map({}),
  profile: co.profile({
    name: z.string(),
  }),
});

// @filename: app.tsx
import * as React from "react";
// ---cut---
// App.tsx
import { JazzProvider } from "jazz-react";
import { MyAppAccount } from "./schema";

export function AppWrapper({ children }: { children: React.ReactNode }) {
  return (
    <JazzProvider
      // Connect to the Jazz network
      sync={{ 
        peer: "wss://cloud.jazz.tools/?key=your-api-key"
      }}
      // Register your account schema
      AccountSchema={MyAppAccount}
    >
      {children}
    </JazzProvider>
  );
}
```
</CodeGroup>

This provider setup accomplishes several things:

- **Network Connection**: It connects to Jazz's cloud service for data synchronization
- **Schema Registration**: It registers your `MyAppAccount` schema with Jazz
- **TypeScript Integration**: It ensures type safety when working with your account data

## How Providers Enable Data Access

In addition to enabling collaboration, providers are your gateway to accessing data. Once you've wrapped your application in a provider, you can:

### Subscribe to Data

Subscriptions are how components in your application access Jazz data.

<CodeGroup>
```tsx twoslash
// @filename: schema.ts
import { co, z } from "jazz-tools";

export const Task = co.map({
  title: z.string(),
  completed: z.boolean(),
});
// @filename: TaskComponent.tsx
import * as React from "react";
import { ID } from "jazz-tools";
import { Task } from "./schema";
// ---cut---
import { useCoState } from "jazz-react";

function TaskComponent({ taskId }: { taskId: ID<typeof Task> }) {
  // Subscribe to a Task by ID
  const task = useCoState(Task, taskId);
  
  if (task === undefined) {
    return <div>Loading...</div>;
  }
  
  if (task === null) {
    return <div>Access denied or task not found</div>;
  }
  
  return (
    <div>
      <h2>{task.title}</h2>
      <input 
        type="checkbox" 
        checked={task.completed}
        onChange={() => task.completed = !task.completed}
      />
    </div>
  );
}
```
</CodeGroup>

Subscriptions in Jazz have specific state handling to help you manage data loading and permissions:

- `undefined` means the data is still loading
- `null` means the data couldn't be accessed (wrong permissions or doesn't exist)
- An actual object instance means the data was successfully loaded

This distinction helps you build appropriate UI states for different scenarios.

For more details, see the [Subscription and Loading](/docs/react/using-covalues/subscription-and-loading) documentation.

### Deep Loading

When working with complex data structures that reference other CoValues, you can specify which related data to load.

<CodeGroup>
```tsx twoslash
// @filename: schema.ts
import { co, z } from "jazz-tools";

export const Task = co.map({
  title: z.string(),
  completed: z.boolean(),
});

export const TaskList = co.list(Task);

export const Project = co.map({
  title: z.string(),
  tasks: TaskList,
});
// @filename: ProjectComponent.tsx
import * as React from "react";
import { ID } from "jazz-tools";
import { Project } from "./schema";
// ---cut---
import { useCoState } from "jazz-react";

function ProjectComponent({ projectId }: { projectId: ID<typeof Project> }) {
  // Subscribe to a Project and its tasks
  const project = useCoState(Project, projectId, {
    // Load the tasks list and all tasks inside it
    resolve: {
      tasks: {
        $each: true
      }
    }
  });
  
  if (project === undefined) {
    return <div>Loading...</div>;
  }
  
  if (project === null) {
    return <div>Access denied or project not found</div>;
  }
  
  return (
    <div>
      <h1>{project.title}</h1>
      <ul>
        {Array.from(project.tasks || []).map(task => (
          <li key={task?.id}>
            {task?.title} - {task?.completed ? 'Done' : 'Pending'}
          </li>
        ))}
      </ul>
    </div>
  );
}
```
</CodeGroup>

This deep loading capability lets you control exactly what data is loaded, balancing performance with data completeness.

For comprehensive information, see the [Deep Loading](/docs/react/using-covalues/subscription-and-loading#deep-loading) documentation.

## How Providers Enable Collaboration

Providers are what make the "collaborative" part of Jazz possible. When you wrap your application in a provider:

1. **Data flows bidirectionally**: Changes made by any user are synchronized to all connected clients
2. **Schema consistency is enforced**: The provider ensures all clients understand your data structure
3. **Authentication is managed**: The provider connects users' identities to their data permissions

Think of providers as creating a shared, synchronized workspace for your users that's accessible from any device.

## Next Steps

Now that you understand how providers connect your application to Jazz, the next step is to learn about [Accounts](/docs/building-with-jazz/accounts) - the foundation of user identity and data in Jazz.

## Further Reading

For more detailed information about providers, see:
- [Provider Options](/docs/project-setup/providers/react) - Complete reference for all provider options
- [Authentication States](/docs/authentication/authentication-states) - Learn how providers handle different user states
- [Subscription and Loading](/docs/react/using-covalues/subscription-and-loading) - In-depth guide to accessing data
