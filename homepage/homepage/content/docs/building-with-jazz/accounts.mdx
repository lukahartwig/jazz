import { CodeGroup } from "@/components/forMdx";
export const metadata = { title: "Accounts" };

# Accounts

Accounts represent user identity and serve as the entry point to all user data in Jazz.

After setting up providers, accounts provide the foundation for user data and multi-user interactions.

## What are Accounts in Jazz?

In Jazz, an Account is more than just a username and password. It's a special type of schema that:

- Represents a user's identity
- Stores their public profile
- Provides access to their private data
- Manages permissions for sharing and collaboration

Think of an Account as the root node in a graph of data. Starting from this root, you can access everything that belongs to or is shared with a user.

## Account Structure

Every Jazz Account serves as a root node in a graph of data, with two fundamental components:

1. **Profile**: Public information about the user (visible to everyone by default)
2. **Root**: Private data that only the user can access by default

This graph-like structure makes it easy to navigate from a user's account to all their connected data, whether it's their own private content or data shared with them.

Here's a simple example of a Jazz Account:

<CodeGroup>
```ts twoslash
import { co, z } from "jazz-tools";

// Custom root structure for private user data
export const MyAppRoot = co.map({
  notes: z.string(),
  settings: z.object({ theme: z.string() }), // Non-collaborative object
});

// Extended profile with additional fields
export const MyAppProfile = co.profile({
  name: z.string(),
  bio: z.string(),
});

// Complete account definition
export const MyAppAccount = co.account({
  profile: MyAppProfile,
  root: MyAppRoot,
});
```
</CodeGroup>

For more information on how Jazz structures data as a graph rooted in accounts, see [CoValues as a graph of data rooted in accounts](/docs/schemas/accounts-and-migrations#covalues-as-a-graph-of-data-rooted-in-accounts).

## How Accounts Enable Collaboration

Accounts play a crucial role in collaboration by:

1. **Establishing identity**: They provide a consistent identity for users across devices
2. **Managing ownership**: They determine who owns and can modify data
3. **Controlling access**: They serve as the basis for permission systems
4. **Supporting sharing**: They enable users to share data with specific individuals or groups

When a user creates content in a Jazz application, that content is automatically associated with their account. This association makes it possible to track ownership, manage permissions, and synchronize changes across devices.

## Account Evolution with Migrations

As your application evolves, you might need to update your account schema. Jazz handles this through migrations:

<CodeGroup>
```ts twoslash
import { Group, co, z } from "jazz-tools";

// A new feature - bookmarks
export const Bookmark = co.map({
  url: z.string(),
  title: z.string(),
});

// Root data with new bookmarks field
export const MyAppRoot = co.map({
  notes: z.string(),
  bookmarks: z.optional(co.list(Bookmark)), // New field
});

// ---cut---
// Account with migration support
export const MyAppAccount = co
  .account({
    root: MyAppRoot,
    profile: co.profile(),
  })
  .withMigration((account) => {
    // Migration runs when user logs in

    // Create root if it doesn't exist
    if (!account.root) {
      account.root = MyAppRoot.create({
        notes: "Welcome to our app!",
      });
    }

    // Add bookmarks list if it doesn't exist
    if (!account.root?.bookmarks) {
      account.root.bookmarks = co.list(Bookmark).create([], Group.create());
    }
  });
```
</CodeGroup>

Migrations run automatically when a user logs in. This is an opportunity to ensure their account data matches your latest schema.

For more information see [Migrations](/docs/schemas/accounts-and-migrations#populating-and-evolving-root-and-profile-schemas-with-migrations).

## Next Steps

After understanding accounts, implement [Authentication](/docs/building-with-jazz/authentication) to connect users to their accounts.

## Further Reading

For more detailed information about accounts, see:
- [Accounts & Migrations](/docs/schemas/accounts-and-migrations) - Complete reference for account capabilities
- [Authentication States](/docs/authentication/authentication-states) - Learn how account states are managed
